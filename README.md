# ORTPR_Valve
Управление задвижкой
Для контроля текущего состояния для задвижки должны быть предусмотрены пять основных (взаимоисключающих) состояний:
    • задвижка открыта;
    • задвижка закрыта;
    • задвижка в промежуточном положении;
    • задвижка открывается;
    • задвижка закрывается.
Помимо пяти основных состояний должны быть предусмотрены дополнительные состояния:
    • «авария»;
    •  «нет напряжения в схеме управления».
Для контроля текущего состояния задвижки должны быть предусмотрены следующие сигналы:
    • контроль положения магнитного пускателя открытия;
    • контроль положения магнитного пускателя закрытия;
    • контроль положения конечного выключателя открытия;
    • контроль положения конечного выключателя закрытия.
Диаграмма работы конечных выключателей задвижки должна соответствовать таблице 1.
Таблица 1  Диаграмма работы конечных выключателей задвижки
Конечный выключатель
Положение задвижки

открыта
промежуточное положение
закрыта
КВО
0
1
1
КВЗ
1
1
0
Для формирования основных состояний задвижки, а также сигнала «отсутствие напряжения в схеме управления» необходимо применять логику, приведённую в таблице 2. 
Таблица 2  Логика формирования флагов состояния задвижки
Состояние задвижки
Состояние сигналов схемы управления

КВО
КВЗ
МПО
МПЗ
Открыто
0
1
-
-
Закрыто
1
0
-
-
В промежутке
1
1
0
0
Открывается
1
1
1
0
Закрывается
1
1
0
1
Нет напряжения в схеме управления 
0
0
-
-
Состояние «авария» предусматриваются для задвижки на основании сигнала, сформированного алгоритмом в контроллере. При наличии сигнала «авария» управление задвижкой не допускается. Управление приводом задвижки в состоянии «авария» должно быть заблокировано до деблокировки оператором.
Сигнал «авария» формируется при наступлении следующих событий:
    • не сошла с конечного выключателя (с выдержкой времени);
    • не включился магнитный пускатель (с выдержкой времени);
    • не открылась/не закрылась (с учетом уставки «время хода»).
Алгоритм предусматривает дистанционное управление задвижкой, а также управление «по месту». Ключ выбора режима управления запорной арматурой располагается непосредственно на задвижке, и обеспечивает переключение режимов:
    • «дистанционное управление»,
    • «местное управление»,
    • «отключено». 
В положении ключа «отключено» управление задвижкой невозможно. В положении ключа «местное управление» допускается управление от кнопок «открыть», «закрыть», «стоп» на задвижке, и не принимаются команды дистанционного управления от контроллера. В положении ключа «дистанционное управление» допускается управление от контроллера по командам «открыть», «закрыть, «стоп» и не принимаются команды от кнопок местного управления.
Подача на задвижку непрерывных команд управления «открыть», «закрыть» запрещается. При наличии сигнала «авария» команда «стоп» подается постоянно.
Алгоритм управления задвижкой необходимо реализовать на языке ST в среде разработки Epsilon LD (ссылка для скачивания: http://www.prosoftsystems.ru/material/546) для ПЛК Regul R500 (ссылка для скачивания виртуального ПЛК: http://www.prosoftsystems.ru/material/406).
